<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <title>Form Order - SuruhBoy</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="style.css">

  <style>
    body { font-family: system-ui, sans-serif; background: #f4f5f7; padding: 20px; }
    .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 0 10px #0001; max-width: 600px; margin: auto; }
    .result-card { margin-top: 20px; padding: 20px; border-radius: 12px; background: #fff; box-shadow: 0 0 10px #0002; display: none; }
    .btn { display: block; width: 100%; padding: 14px; margin-top: 10px; border-radius: 8px; text-align: center; text-decoration: none; color: white; background: #007bff; font-weight: bold; cursor: pointer; }
    #copyBtn { background: #28a745; border: none; }
    pre { white-space: pre-wrap; background: #f0f2f4; padding: 15px; border-radius: 10px; border: 1px solid #e3e6e8; }
  </style>
</head>

<body>

<div class="card">
  <h2>Form Order</h2>

  <form id="orderForm">
    <label>Biaya</label>
    <input name="biaya" required>

    <label>Kapan</label>
    <input name="kapan" required>

    <label>Nama</label>
    <input name="nama" required>

    <label>No HP</label>
    <input name="hp" required>

    <label>Deskripsi</label>
    <textarea name="deskripsi"></textarea>

    <label>Jemput</label>
    <input name="jemput">

    <label>Antar</label>
    <input name="antar">

    <label>Agent</label>
    <input name="agent">

    <button class="btn" type="submit">SUBMIT</button>
  </form>
</div>

<!-- HASIL TEMPLATE -->
<div class="result-card" id="resultCard">
  <h2>ðŸŸ¦ ORDER MASUK</h2>
  <pre id="templateBox"></pre>
  <button id="copyBtn" class="btn">COPY TEMPLATE</button>
  <a id="chatBtn" class="btn" target="_blank">CHAT KE AGENT</a>
</div>

<script>
const SCRIPT_URL = "PASTE_URL_WEB_APP_SCRIPT_KAMU";

document.getElementById("orderForm").addEventListener("submit", async function(e) {
  e.preventDefault();

  const form = new FormData(this);

  // Submit ke Apps Script
  await fetch(SCRIPT_URL, { method: "POST", body: form });

  // Buat template
  const template = `
ðŸŸ¦ ORDER MASUK

ðŸ“¦ Biaya: ${form.get("biaya")}
ðŸ“… Kapan: ${form.get("kapan")}
ðŸ‘¤ Nama: ${form.get("nama")}
ðŸ“± https://wa.me/${form.get("hp")}
ðŸ“ Deskripsi: ${form.get("deskripsi") || "-"}

ðŸ“ Jemput: ${form.get("jemput") || "-"}
ðŸ“ Antar: ${form.get("antar") || "-"}

ðŸ§‘â€ðŸ’¼ Agent: ${form.get("agent")}`.trim();

  // Tampilkan template
  document.getElementById("templateBox").textContent = template;
  document.getElementById("resultCard").style.display = "block";

  // Link ke grup
  document.getElementById("chatBtn").href =
    "https://chat.whatsapp.com/DlIfRxaICuRCXc1ZndEDTc";

  // Reset form
  this.reset();
});

// Tombol copy
document.getElementById("copyBtn").addEventListener("click", async () => {
  try {
    await navigator.clipboard.writeText(
      document.getElementById("templateBox").textContent
    );
    copyBtn.textContent = "âœ” TERSALIN!";
    copyBtn.style.background = "#1e7c33";

    setTimeout(() => {
      copyBtn.textContent = "COPY TEMPLATE";
      copyBtn.style.background = "#28a745";
    }, 1500);
  } catch (err) {
    alert("Gagal menyalin!");
  }
});
</script>
</body>
</html>
